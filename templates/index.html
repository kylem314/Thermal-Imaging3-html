<!DOCTYPE html>
<html>
<head>
<title> Thermal Imaging Analyzer </title>

<!-- 1 em = 16 px -->
  
<style>
  p {
    margin-top:3px;
    margin-bottom:3px;
  }
  
  .answer {
    font-size:24px;;
  }

  .textbox {
    color:pink;
    background-color:brown;
    border-width:thin;
    font-family:'Serif';
  }

  .submitButton {
    color:red;
    background-color:aqua;
    border-width:thick;

  }
</style>  

</head>

<body style="background-color:#ffffff"> 
<h1 style="color:#fcc603"> MakeSAFE </h1>

<h1 style="margin-bottom:3px;color:#000000;font-size:3em;font-family:'Arial'">Thermal Imaging Analyzer</h1>

<br>
<br>


<form method="post">

  
<label> Upload video file (mp4) </label>
    <form method=post enctype=multipart/form-data>
      <p><input type=file name=file>
         <input type=submit value=Upload>
    </form>
  <br>

<p style="font-size:16px;font-family:'Monospace'"> X Coord Start Position </p> 
<p><input class="textbox" type="number" step="1" type="number" name="xCoordStart" required></p> 

<p style="font-size:16px;font-family:'Monospace'"> Y Coord Start Position </p> 
<p><input class="textbox" type="number" step="1" type="number" name="yCoordStart" required></p>   

<p style="font-size:16px;font-family:'Monospace'"> Width </p> 
<p><input class="textbox" type="number" step="1" type="number" name="width" required></p> 

<p style="font-size:16px;font-family:'Monospace'"> Height </p> 
<p><input class="textbox" type="number" step="1" type="number" name="height" required></p>

<p style="font-size:16px;font-family:'Monospace'"> Start Frame </p> 
<p><input class="textbox" type="number" step="1" type="number" name="startFrame" required></p>

<p style="font-size:16px;font-family:'Monospace'"> End Frame </p> 
<p><input class="textbox" type="number" step="1" type="number" name="endFrame" required></p>

<br>

<p><input class="submitButton" type="submit" formaction="/add" placeholder="Number 1"></p> <!-- submit button -->
</form>


</form>

<p class="answer"> Output </p>
  <!--
<p class="answer" id="pngImage"> pngImage </p>
  -->
<div> 
<img src="">
</div>
<!--
  <p class="answer" id="grayValue"> grayValue </p>
  -->
<div id="grayValueDiv"> Average grayscale value of region </div>
<!--
  <p class="answer"> {{ data.grayValue }} </p>
  -->
<!-- 
  <img src="https://replit.com/@KyleMyint/Thermal-Imaging3-html#converted.png" alt="converted image"> 
  -->

<canvas id="c"> </canvas>
  
</body>

<script type="text/javascript">

  console.log("Hello world!")
  
  var imageData = {{ data.imageData }}
  var grayValue = {{ data.grayValue }}
  var imgHeight = {{ data.imgHeight }}
  var imgWidth = {{ data.imgWidth }}


  console.log(typeof grayValue);
  //console.log(pngImage + grayValue);
  
  //document.getElementById("grayValue").innerHTML = grayValue;
  //document.getElementById("imageData").innerHTML = imageData;

// const para = document.createElement("p");
// para.innerText = grayValue;
// document.body.appendChild(para);

const para = document.createElement("p");
para.innerHTML =  grayValue;
document.getElementById("grayValueDiv").appendChild(para);

var ctx = c.getContext('2d');

var drawArray = function(arr, width, height) {
  // set your canvas width/height
  c.width = width;
  c.height = height;
  
  // create the imageData object, you'll need the width and height of your image
  var dataImage = ctx.createImageData(width, height);
  // browsers supporting TypedArrays
  if (dataImage.data.set) {
    dataImage.data.set(arr);
  } else {
    // IE9
    arr.forEach(function(val, i) {
      dataImage.data[i] = val;
    });
  }
  ctx.putImageData(dataImage, 0, 0);
};

drawArray(imageData, imgWidth, imgHeight);
  
</script>
  
</html>

<!-- https://www.w3schools.com/colors/colors_picker.asp -->